(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){},220:function(e,t,a){e.exports=a.p+"static/media/zation-logo.d46e3e57.svg"},223:function(e,t,a){e.exports=a.p+"static/media/zationLogo.fe76f2a9.svg"},226:function(e,t,a){e.exports=a.p+"static/media/user.c50d87dc.svg"},5449:function(e,t,a){e.exports=a(5788)},5462:function(e,t,a){},5464:function(e,t,a){},5466:function(e,t,a){},5537:function(e,t,a){},5564:function(e,t,a){},5626:function(e,t,a){},5628:function(e,t,a){},5632:function(e,t,a){},5773:function(e,t,a){},5782:function(e,t,a){},5788:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(49),i=a.n(r),o=(a(5460),a(5462),a(5464),a(5466),a(8)),c=a.n(o),l=a(29),u=a(6),p=a(7),d=a(10),m=a(5),h=a(57),g=a(9),v=a(28),f=a(87),b=(a(5537),a(50)),y=a(39),k=a.n(y),w=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App transition-item detail-page darkTheme"},s.a.createElement(k.a,{className:"fullHeight"},s.a.createElement(b.ScaleLoader,{heightUnit:"em",widthUnit:"em",height:7,width:.6,color:"#3099bb"})))}}]),t}(n.Component),E=a(189),O=(a(5564),a(220)),C=a.n(O),N=a(56),j=function(e){document.getElementById(e).classList.remove("shake"),setTimeout(function(){document.getElementById(e).classList.add("shake")},10)},x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._handleKeyPress=function(){var e=Object(l.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,a.login();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!1,error:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.error;return s.a.createElement("div",{className:"App transition-item detail-page darkTheme"},s.a.createElement(k.a,{className:"fullHeight"},s.a.createElement("div",{id:"login-co",className:"loginContainer fadeIn animated"},s.a.createElement("div",{className:"logoContainer"},s.a.createElement("img",{src:C.a,alt:"Zation Logo",width:"110em",height:"110em",className:"logo"}),s.a.createElement("h1",{className:"logoText"},"LOG IN")),s.a.createElement("div",{className:"form"},s.a.createElement("div",{id:"username-co",className:"wrap-input100 validate-input animated "+(a?"wrap-input-error":""),"data-validate":"Enter username"},s.a.createElement("input",{onChange:function(){e.setState({error:!1})},id:"username",onKeyPress:this._handleKeyPress.bind(this),className:"input100",type:"text",name:"username",placeholder:"Username"}),s.a.createElement("span",{className:"focus-input100 focus-input-user"})),s.a.createElement("div",{id:"password-co",className:"wrap-input100 validate-input animated "+(a?"wrap-input-error":""),"data-validate":"Enter password"},s.a.createElement("input",{onChange:function(){e.setState({error:!1})},id:"password",onKeyPress:this._handleKeyPress.bind(this),className:"input100",type:"password",name:"username",placeholder:"Password"}),s.a.createElement("span",{className:"focus-input100 focus-input-lock"}))),s.a.createElement("div",{className:"btnContainer"},s.a.createElement(N.a,{disabled:this.state.loading,variant:"extended","aria-label":"Delete",onClick:this.login.bind(this),className:"btn loginBtn "+t.fab},this.state.loading?s.a.createElement(b.ClipLoader,{color:"white"}):"Login")))))}},{key:"login",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a,n,s,r=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("username").value,a=document.getElementById("password").value,n=!0,0===t.length&&(n=!1,j("username-co")),0===a.length&&(n=!1,j("password-co")),this.state.error&&(j("username-co"),j("password-co"),n=!1),!n){e.next=12;break}return this.setState({loading:!0}),s=Object(v.load)(),e.next=11,s.request().systemController(!0).controller("zation/panel/auth").data({username:t,password:a}).onSuccessful(function(){document.getElementById("login-co").classList.add("fadeOut"),setTimeout(Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.app.loadPanel();case 2:case"end":return e.stop()}},e,this)})),500)}).onError(function(){r.setState({error:!0}),j("username-co"),j("password-co")}).send();case 11:setTimeout(function(){r.setState({loading:!1})},500);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"componentDidMount",value:function(){this._isMount=!0}},{key:"setState",value:function(e){this._isMount&&Object(h.a)(Object(m.a)(t.prototype),"setState",this).call(this,e)}}]),t}(n.Component),D=Object(E.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit}}})(x),I=a(223),S=a.n(I),P=a(5794),L=(a(5626),a(5628),a(47)),M=a(5796),T=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"sidebar ps--active-y ps"},s.a.createElement("div",{className:"scrollbar-container sidebar-nav ps ps-container ps--active-y"},s.a.createElement("ul",{className:"nav"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(M.a,{to:"/",className:"nav-link","ria-current":"page",exact:!0,activeClassName:"active"},s.a.createElement(L.e,{className:"nav-icon"}),"Dashboard")),s.a.createElement("li",{className:"nav-title"},"Details"),s.a.createElement("li",{className:"nav-item"},s.a.createElement(M.a,{to:"/server",className:"nav-link","ria-current":"page",activeClassName:"active"},s.a.createElement(L.c,{className:"nav-icon"}),"Server")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(M.a,{to:"/user",className:"nav-link","ria-current":"page",activeClassName:"active"},s.a.createElement(L.f,{className:"nav-icon"}),"User")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(M.a,{to:"/ping",className:"nav-link","ria-current":"page",activeClassName:"active"},s.a.createElement(L.d,{className:"nav-icon"}),"Ping")))),s.a.createElement("button",{className:"sidebar-minimizer mt-auto",onClick:this.miniSidebar.bind(this),type:"button"}))}},{key:"miniSidebar",value:function(){var e=document.getElementsByTagName("body")[0],t=document.getElementsByClassName("sidebar")[0];e.classList.toggle("brand-minimized"),e.classList.toggle("sidebar-minimized"),t.classList.toggle("ps--active-y"),t.classList.toggle("ps")}}]),t}(n.Component),A=a(5631),R=function(){function e(){Object(u.a)(this,e),this.storage={},this.clusterInfoStorage={},this.panelAuthUserMap={},this.defaultUserName="",this.processClusterStorage=!1,this.workerCount=0,this.instanceCount=0,this.emitter=new A}return Object(p.a)(e,[{key:"connect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",a=Object(v.load)(t);a.channelReact().onPubPanelOutCh("firstPong",function(t){e.firstPong(t.id,t.info)}),a.channelReact().onPubPanelOutCh("ping",function(t){e.workerPing(t.id)}),a.channelReact().onPubPanelOutCh("update-mainUpdate",function(t){e.update("update-mainUpdate",t.id,t.info)}),a.channelReact().onPubPanelOutCh("update-workerStatus",function(t){e.update("update-workerStatus",t.id,t.info)})}},{key:"_processClusterInfo",value:function(){this.processClusterStorage&&this.processClusterInfo()}},{key:"processClusterInfo",value:function(){var e=Date.now(),t=0,a=0,n=0,s=0,r=0,i=0,o=0,c=0,l=0,u=0,p=0,d=!1,m=!0,h=0,g={};for(var v in this.storage)if(this.storage.hasOwnProperty(v)){var f=this.storage[v];for(var b in f.serverStartedTimestamp<e&&(e=f.serverStartedTimestamp),f.cpu&&(t+=f.cpu),f.memory&&(a+=f.memory.totalMemMb,n+=f.memory.usedMemMb),f.drive&&(r+=f.drive.totalGb,s+=f.drive.usedGb),f.net&&(i+=f.net.inputMb,o+=f.net.outputMb),c+=f.brokerCount,f.debug&&(d=!0),f.useScUws||(m=!1),f.workers)if(f.workers.hasOwnProperty(b)){var y=f.workers[b];l+=y.clientCount,u+=y.httpRequests,p+=y.wsRequests,h+=y.user.defaultUserGroupCount,this._processAuthUserGroup(g,y.user.authUserGroups)}}this.clusterInfoStorage={cpu:t/this.instanceCount,memory:{totalMemMb:a,usedMemMb:n},drive:{totalGb:r,usedGb:s},net:{inputMb:i,outputMb:o},brokerCount:c,serverStartedTimestamp:e,clientCount:l,httpRequests:u,wsRequests:p,debug:d,useScUws:m,user:{defaultUserGroupCount:h,authUserGroups:g}},this.emitter.emit("clusterUpdate")}},{key:"_processAuthUserGroup",value:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e.hasOwnProperty(a)?e[a]+=t[a]:e[a]=t[a])}},{key:"update",value:function(e,t,a){var n=t.instanceId,s=t.workerFullId;if(this._checkWorkerExists(n,s)){var r=this._getIdTarget(n,s);"update-mainUpdate"===e?(this._updateSystemInfo(r.instance,r.worker,a.systemInfo),r.worker.clientCount=a.clientCount,r.worker.user=a.user,this._processClusterInfo(),this.emitter.emit("mainUpdate",n,s,r)):"update-workerStatus"===e&&(r.worker.httpRequests=a.httpRequests,r.worker.wsRequests=a.wsRequests,this._processClusterInfo(),this.emitter.emit("statusUpdate",n,s,r)),this.refreshWorkerPing(n,s)}}},{key:"_checkWorkerExists",value:function(e,t){var a=!1;return this.storage.hasOwnProperty(e)&&this.storage[e].workers.hasOwnProperty(t)&&(a=!0),a}},{key:"_getIdTarget",value:function(e,t){return{instance:this.storage[e],worker:this.storage[e].workers[t]}}},{key:"_updatePanelAuthUserMap",value:function(e){if("object"===typeof e)for(var t in e)e.hasOwnProperty(t)&&!this.panelAuthUserMap.hasOwnProperty(t)&&(this.panelAuthUserMap[t]=e[t])}},{key:"_updatePanelDefaultName",value:function(e){this.defaultUserName||(this.defaultUserName=e)}},{key:"firstPong",value:function(e,t){var a=e.instanceId;if(this.storage.hasOwnProperty(a))this._createWorker(this.storage[a],e,t);else{var n={};n.brokerCount=t.brokerCount,n.hostname=t.hostname,n.port=t.port,n.path=t.path,n.postKey=t.postKey,n.secure=t.secure,n.appName=t.appName,n.environment=t.environment,n.debug=t.debug,n.useScUws=t.useScUws,n.serverStartedTimestamp=t.serverStartedTimestamp,this._updatePanelAuthUserMap(t.panelAuthUserMap),this._updatePanelDefaultName(t.defaultUserName);var s=t.generalSystemInfo;n.cpuModel=s.cpuModel,n.cpuCount=s.cpuCount,n.platform=s.platform,n.oos=s.oos,n.workers={},this.storage[a]=n,this.instanceCount++,this.emitter.emit("newInstance",a),this._createWorker(n,e,t)}}},{key:"_updateSystemInfo",value:function(e,t,a){var n=a.instance;e.drive=n.drive,e.memory=n.memory,e.net=n.net,e.cpu=n.cpu;var s=a.pid;t.cpu=s.cpu,t.memory=s.memory}},{key:"refreshWorkerPing",value:function(e,t){if(this.storage.hasOwnProperty(e)&&this.storage[e].workers.hasOwnProperty(t)){var a=this.storage[e].workers[t];clearTimeout(a.timeout),this._setWorkerTimeout(this.storage[e].workers,t,e)}}},{key:"workerPing",value:function(e){this.refreshWorkerPing(e.instanceId,e.workerFullId),this.emitter.emit("workerPing",e.instanceId,e.workerFullId)}},{key:"activateProcessClusterInfo",value:function(){this.processClusterStorage=!0}},{key:"_createWorker",value:function(e,t,a){var n=e.workers;if(!n.hasOwnProperty(t.workerFullId)){var s={};s.workerStartedTimestamp=a.workerStartedTimestamp,s.clientCount=a.clientCount,this._updateSystemInfo(e,s,a.systemInfo),s.user=a.user,s.httpRequests=a.httpRequests,s.wsRequests=a.wsRequests,n[t.workerFullId]=s,this.workerCount++,this.emitter.emit("newWorker",t.workerFullId),this._setWorkerTimeout(n,t.workerFullId,t.instanceId),this._processClusterInfo()}}},{key:"_setWorkerTimeout",value:function(e,t,a){var n=this;e[t].timeout=setTimeout(function(){delete e[t],n.workerCount--,n.emitter.emit("workerLeft",t),n._checkInstanceIsDown(a)},7e3)}},{key:"_checkInstanceIsDown",value:function(e){if(this.storage.hasOwnProperty(e)){var t=this.storage[e].workers,a=0;for(var n in t)t.hasOwnProperty(n)&&a++;0===a&&(delete this.storage[e],this.instanceCount--,this.emitter.emit("instanceLeft",e))}}}],[{key:"getEngine",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"reset",value:function(){e.instance=new e}}]),e}(),U=a(5795),_=a(5789),W=(a(5632),a(193),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={play:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"text-white bg-info card"+(this.props.big?" big-card":"")},s.a.createElement("div",{className:"pb-0 card-body"},s.a.createElement("div",{id:"carouselButtons"},s.a.createElement("button",{id:"timeControl",type:"button",className:"btn btn-time-control animated",onClick:this.changeTime.bind(this)},this.state.play?s.a.createElement(L.a,{height:30,width:30,className:"timeIcon"}):s.a.createElement(L.b,{height:20,width:20,className:"timeIcon"}))),s.a.createElement("div",{className:"text-value"},this.props.value),s.a.createElement("div",null,this.props.description)),this.props.children)}},{key:"changeTime",value:function(e){var t;e.target.classList.contains("btn-time-control")&&(t=e.target,console.log(t),t.classList.remove("pulse"),setTimeout(function(){t.classList.add("pulse")},10)),this.setState({play:!this.state.play}),"function"===typeof this.props.onTimeChange&&this.props.onTimeChange(this.state.play)}}]),t}(n.Component)),F=a(55);var q=function(e){var t=this,a="above",n="below",s="chartjs-tooltip",r="no-transform",i="tooltip-body",o="tooltip-body-item",c="tooltip-body-item-color",l="tooltip-body-item-label",u="tooltip-body-item-value",p="tooltip-header",d="tooltip-header-item",m={DIV:"div",SPAN:"span",TOOLTIP:"".concat(this._chart.canvas.id||function(){var e=function(){return(65536*(1+Math.random())|0).toString(16)},a="_canvas-".concat(e()+e());return t._chart.canvas.id=a,a}(),"-tooltip")},h=document.getElementById(m.TOOLTIP);if(h||((h=document.createElement("div")).id=m.TOOLTIP,h.className=s,this._chart.canvas.parentNode.appendChild(h)),0!==e.opacity){if(h.classList.remove(a,n,r),e.yAlign?h.classList.add(e.yAlign):h.classList.add(r),e.body){var g=e.title||[],v=document.createElement(m.DIV);v.className=p,g.forEach(function(e){var t=document.createElement(m.DIV);t.className=d,t.innerHTML=e,v.appendChild(t)});var f=document.createElement(m.DIV);f.className=i,e.body.map(function(e){return e.lines}).forEach(function(t,a){var n=document.createElement(m.DIV);n.className=o;var s=e.labelColors[a],r=document.createElement(m.SPAN);if(r.className=c,r.style.backgroundColor=s.backgroundColor,n.appendChild(r),t[0].split(":").length>1){var i=document.createElement(m.SPAN);i.className=l,i.innerHTML=t[0].split(": ")[0],n.appendChild(i);var p=document.createElement(m.SPAN);p.className=u,p.innerHTML=t[0].split(": ").pop(),n.appendChild(p)}else{var d=document.createElement(m.SPAN);d.className=u,d.innerHTML=t[0],n.appendChild(d)}f.appendChild(n)}),h.innerHTML="",h.appendChild(v),h.appendChild(f)}var b=this._chart.canvas.offsetTop,y=this._chart.canvas.offsetLeft;h.style.opacity=1,h.style.left="".concat(y+e.caretX,"px"),h.style.top="".concat(b+e.caretY,"px")}else h.style.opacity=0},B=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).props.getData();a.chartOptions={spanGaps:!0,tooltips:{enabled:!1,custom:q},maintainAspectRatio:!1,legend:{display:!1},layout:{padding:{top:8,right:8,left:8}},scales:{xAxes:[{type:"time",time:{unit:"millisecond"},gridLines:{color:"transparent",zeroLineColor:"transparent"},ticks:{fontSize:2,fontColor:"transparent",beginAtZero:!0}}],yAxes:[{display:!1,ticks:{display:!1}}]},elements:{line:{tension:1e-5,borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}},a.props.postFix&&(a.chartOptions.tooltips.callbacks={label:function(e){return e.yLabel+" "+a.props.postFix}});var s=new Date,r=new Date;r.setMilliseconds(s.getMilliseconds()+(a.interval||1e3));var i={datasets:[{label:a.props.getDataLabel?a.props.getDataLabel(n):a.props.dataLabel?a.props.dataLabel:"",backgroundColor:"rgba(255,255,255,.3)",borderColor:"rgba(255,255,255,.55)",data:[{x:s,y:n},{x:r,y:n}]}]};return a.state={value:n,isRunning:!0,data:i},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(W,{value:this.getValue.bind(this)(),showTimeControl:!0,description:this.getDescription.bind(this)(),onTimeChange:this.timeChange.bind(this)},s.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"70px"}},s.a.createElement(F.b,{options:this.chartOptions,data:this.state.data,height:70})))}},{key:"getDescription",value:function(){return this.props.description?this.props.description:this.props.getDescription?this.props.getDescription(this.state.value):""}},{key:"getValue",value:function(){return this.props.getValue?this.props.getValue(this.state.value):this.props.postFix?this.state.value+" "+this.props.postFix:this.state.value}},{key:"timeChange",value:function(e){e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e||this.state.isRunning||(this.process.bind(this)(),this.componentDidMount.bind(this)())}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,isRunning:!0})}},{key:"process",value:function(){var e=this.state.data.datasets.slice(0),t=e[0].data.slice(0),a=this.props.getData();e[0].data=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(e.length>=a){var n=e.splice(1);return n.push(t),n}return e.push(t),e}(t,{x:new Date,y:a},this.props.maxLength),this.props.getDataLabel&&(e[0].label=this.props.getDataLabel(a)),this.setState({value:a,data:Object.assign({},{datasets:e})})}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),V=a(16),G=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).chartOptions={spanGaps:!0,tooltips:{enabled:!1,custom:q},maintainAspectRatio:!1,legend:{display:!0,labels:{fontColor:"#ffffff"},position:"bottom"},layout:{padding:{top:8,right:8,left:8}},scales:{xAxes:[{type:"time",time:{unit:"millisecond"},gridLines:{color:"transparent",zeroLineColor:"transparent"},ticks:{fontSize:2,fontColor:"transparent",beginAtZero:!0}}],yAxes:[{display:!1,ticks:{display:!1}}]},elements:{line:{},point:{radius:4,hitRadius:10,hoverRadius:4}}},a.props.postFix&&(a.chartOptions.tooltips.callbacks={label:function(e){return e.yLabel+" "+a.props.postFix}});var n=a.props.getData();return a.state={value:n,isRunning:!0,data:{datasets:[]}},a.fillDataSet.bind(Object(V.a)(Object(V.a)(a)))(),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"fillDataSet",value:function(){var e=this,t=new Date,a=new Date;a.setMilliseconds(t.getMilliseconds()+(this.interval||1e3)),this.state.value.forEach(function(n,s){e.state.data.datasets.push({label:e.props.label?e.props.label[s]:e.props.getDataLabel(n),backgroundColor:0===s?"rgba(48, 153, 187,.3)":"rgba(43, 225, 98,.3)",borderColor:0===s?"rgba(48, 153, 187,.55)":"rgba(43, 225, 98,.55)",data:[{x:t,y:n},{x:a,y:n}]})})}},{key:"render",value:function(){return s.a.createElement(W,{value:this.getValue.bind(this)(),big:!0,description:this.getDescription.bind(this)(),onTimeChange:this.timeChange.bind(this)},s.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"300px"}},s.a.createElement(F.b,{options:this.chartOptions,data:this.state.data,height:70})))}},{key:"getDescription",value:function(){return this.props.description?this.props.description:this.props.getDescription?this.props.getDescription(this.state.value):""}},{key:"getValue",value:function(){return this.props.getValue?this.props.getValue(this.state.value):this.props.postFix?this.state.value+" "+this.props.postFix:this.state.value}},{key:"timeChange",value:function(e){e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e||this.state.isRunning||(this.process.bind(this)(),this.componentDidMount.bind(this)())}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,isRunning:!0})}},{key:"process",value:function(){var e=this,t=this.state.data.datasets.slice(0),a=this.props.getData();a.forEach(function(a,n){var s=t[n].data.slice(0);t[n].data=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(e.length>=a){var n=e.splice(1);return n.push(t),n}return e.push(t),e}(s,{x:new Date,y:a},e.props.maxLength),e.props.getDataLabel&&(t[n].label=e.props.getDataLabel(a))}),this.setState({value:a,data:Object.assign({},{datasets:t})})}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),H=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-6 col-lg-3"},s.a.createElement(B,{getDataLabel:t.getClientsConnectedDesc,getDescription:t.getClientsConnectedDesc,getData:t.getClientsConnected,every:2300})),s.a.createElement("div",{className:"col-sm-6 col-lg-3"},s.a.createElement(B,{dataLabel:"Worker",getDescription:t.getWorkerDesc,getData:t.getWorkerOnline,every:5e3})),s.a.createElement("div",{className:"col-sm-6 col-lg-3"},s.a.createElement(B,{dataLabel:"Cpu usage",description:"Cpu usage",getData:t.getCpuUsage,every:2300,postFix:"%"})),s.a.createElement("div",{className:"col-sm-6 col-lg-3"},s.a.createElement(B,{dataLabel:"Memory usage",description:"Memory usage",getData:t.getMemoryUsage,every:2500,postFix:"mb",getValue:t.getMemoryUsagePercent}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12 col-lg-12"},s.a.createElement(G,{description:"Requests in total",label:["WebSocket Requests","HTTP Requests"],getValue:function(e){return e.reduce(function(e,t){return e+t},0)},getData:t.getRequestData,maxLength:40,every:1e3})))))}}],[{key:"getRequestData",value:function(){return[R.getEngine().clusterInfoStorage.wsRequests,R.getEngine().clusterInfoStorage.httpRequests]}},{key:"getWorkerDesc",value:function(){return"Worker online ("+R.getEngine().instanceCount+" Server)"}},{key:"getClientsConnectedDesc",value:function(e){return e>1||0===e?"Clients connected":"Client connected"}},{key:"getClientsConnected",value:function(){return R.getEngine().clusterInfoStorage.clientCount}},{key:"getCpuUsage",value:function(){return Number(R.getEngine().clusterInfoStorage.cpu).toFixed(1)}},{key:"getMemoryUsage",value:function(){return Number(R.getEngine().clusterInfoStorage.memory.usedMemMb).toFixed(1)}},{key:"getMemoryUsagePercent",value:function(e){return Number(e/R.getEngine().clusterInfoStorage.memory.totalMemMb*100).toFixed(1)+" %"}},{key:"getWorkerOnline",value:function(){return R.getEngine().workerCount}}]),t}(n.Component),z=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(k.a,{className:"fullHeight loaderDown"},s.a.createElement("h1",{style:{color:"white"}},"This feature is available soon"))))}}]),t}(n.Component),Z=a(230),K=a(226),J=a.n(K),X=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={play:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"text-white bg-info card"+(this.props.big?" big-card":"")},s.a.createElement("div",{className:"pb-0 card-body"},s.a.createElement("div",{className:"text-value"},this.props.value),s.a.createElement("div",null,this.props.description)),this.props.children)}}]),t}(n.Component),Y={renderZeroCompensation:function(e,t){var a=t._view,n=e.chart.ctx,s=a.x-a.width/2;n.beginPath(),n.strokeStyle="#aaaaaa",n.moveTo(s,a.y),n.lineTo(s+a.width,a.y),n.stroke()},afterDatasetsDraw:function(e,t){var a=this,n=e.getDatasetMeta(0),s=e.config.data.datasets[0].data;n.data.forEach(function(t,n){0===s[n]&&a.renderZeroCompensation(e,t)})}},$=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).chartOptions={responsive:!0,scaleBeginAtZero:!1,barBeginAtOrigin:!0,tooltips:{enabled:!1,custom:q},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1,barPercentage:.8}],yAxes:[{display:!0,beginAtZero:!0}]}},a.props.postFix&&(a.chartOptions.tooltips.callbacks={label:function(e){return e.yLabel+" "+a.props.postFix}}),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"buildDataSet",value:function(){return{labels:this.props.label,datasets:[{backgroundColor:"rgba(48, 153, 187,1)",borderColor:"rgba(48, 153, 187,1)",data:this.props.data}]}}},{key:"render",value:function(){return s.a.createElement(X,{value:this.props.value,big:!0,description:this.props.description},s.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"300px"}},s.a.createElement(F.a,{options:this.chartOptions,data:this.buildDataSet.bind(this)(),height:100,plugins:[Y],redraw:this.props.redraw})))}}]),t}(n.Component),Q=(a(5773),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={mode:"load",btnLoad:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.mode;return"load"===t?s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(k.a,{className:"fullHeight loaderDown"},s.a.createElement(b.ScaleLoader,{heightUnit:"em",widthUnit:"em",height:7,width:.6,color:"#3099bb"})))):"result"===t?s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement($,{postFix:"ms",label:this.state.label,description:"Average ping time",data:this.state.data,value:this.state.avg+" ms",redraw:!0})),s.a.createElement("div",{className:"btnContainer"},s.a.createElement(N.a,{variant:"extended","aria-label":"Delete",onClick:this.refresh.bind(this),className:"btn loginBtn "+e.fab},this.state.btnLoad?s.a.createElement(b.ClipLoader,{color:"white"}):"Refresh"))):void 0}},{key:"refresh",value:function(){this.setState({btnLoad:!0}),this.process.bind(this)()}},{key:"componentDidMount",value:function(){this._isMount=!0,"load"===this.state.mode&&this.process.bind(this)()}},{key:"process",value:function(){var e=this;Object(l.a)(c.a.mark(function t(){var a,n,s,r,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(v.load)(),n=[],s=[],r=1;case 4:if(!(r<21)){t.next=14;break}return n.push("Ping "+r),t.t0=s,t.next=9,a.ping();case 9:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 11:r++,t.next=4;break;case 14:i=s.reduce(function(e,t){return e+t}),e.setState({label:n,avg:Number(i/s.length).toFixed(2),mode:"result",data:s,btnLoad:!1});case 16:case"end":return t.stop()}},t,this)}))()}},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"setState",value:function(e){this._isMount&&Object(h.a)(Object(m.a)(t.prototype),"setState",this).call(this,e)}}]),t}(n.Component)),ee=Object(E.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit}}})(Q),te=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(G,{redraw:!0,getValue:function(e){return e[0]},getData:t.getClientCount,maxLength:40,every:1e3,getDataLabel:t.getClientsConnectedDesc,getDescription:t.getClientsConnectedDesc})))}}],[{key:"getClientsConnectedDesc",value:function(e){return e>1||0===e?"Clients connected":"Client connected"}},{key:"getClientCount",value:function(){return[R.getEngine().clusterInfoStorage.clientCount]}}]),t}(n.Component),ae=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(d.a)(this,Object(m.a)(t).call(this,e));try{a.state={name:Object(v.load)().getTokenVariable("ZATION-PANEL-USER-NAME")},R.getEngine().activateProcessClusterInfo(),R.getEngine().processClusterInfo()}catch(n){a.state={name:"Unknown name"}}return a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(U.a,null,s.a.createElement("div",{className:"App transition-item detail-page sidebar-lg-show sidebar-fixed"},s.a.createElement("header",{className:"app-header"},s.a.createElement(P.a,{bg:"dark",variant:"dark"},s.a.createElement(Z.a,{className:"navbar-toggler sidebar-toggler d-lg-none mr-auto",onClick:this.switchSidebar.bind(this)},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement(P.a.Brand,{href:"#home",className:"sm-auto"},s.a.createElement("img",{alt:"",src:S.a,width:"30",height:"30",className:"d-inline-block align-top"})," Zation"),s.a.createElement("div",{className:"profile"},s.a.createElement("span",{className:"name"},this.state.name),s.a.createElement("li",{className:"nav-item dropdown account-switch"},s.a.createElement("a",{className:"nav-link nav-link",href:"/",onClick:this.switchAccountDropDown.bind(this)},s.a.createElement("img",{src:J.a,alt:"user",width:"30",height:"30",className:"account-switch"})),s.a.createElement("div",{id:"account-dropdown-menu",className:"dropdown-menu dropdown-menu-right animated fadeIn account-switch"},s.a.createElement("div",{className:"dropdown-header text-center account-switch"},s.a.createElement("strong",{className:"account-switch"},"Account")),s.a.createElement("div",{className:"dropdown-item account-switch",onClick:this.logout.bind(this)},s.a.createElement("i",{className:"fa fa-lock"}),"Logout")))))),s.a.createElement(T,null),s.a.createElement("main",{className:"main"},s.a.createElement(_.a,{exact:!0,path:"/",component:H}),s.a.createElement(_.a,{exact:!0,path:"/ping",component:ee}),s.a.createElement(_.a,{exact:!0,path:"/user",component:te}),s.a.createElement(_.a,{exact:!0,path:"/server",component:z}))))}},{key:"componentDidMount",value:function(){var e=this;document.getElementsByTagName("body")[0].addEventListener("click",function(t){e.offAccountDropDown(t)})}},{key:"switchSidebar",value:function(){document.getElementsByTagName("body")[0].classList.toggle("sidebar-show")}},{key:"switchAccountDropDown",value:function(e){e.preventDefault(),document.getElementById("account-dropdown-menu").classList.toggle("show")}},{key:"offAccountDropDown",value:function(e){if(!e.target.classList.contains("account-switch")){var t=document.getElementById("account-dropdown-menu");t.classList.contains("show")&&t.classList.remove("show")}}},{key:"logout",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(v.load)(),e.next=4,t.deauthenticate();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:window.location.pathname="";case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),ne=(a(5782),a(135)),se=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:"App transition-item detail-page darkTheme"},s.a.createElement(k.a,{className:"fullHeight"},s.a.createElement("div",{className:"ErrorContainer"},s.a.createElement(ne.b,{className:"warningIcon bounceInDown animated"}),s.a.createElement("h1",null,this.props.message),s.a.createElement(N.a,{variant:"extended","aria-label":"Delete",onClick:this.reload,className:"btn "+e.fab},s.a.createElement(ne.a,{className:e.extendedIcon}),"Try again"))))}},{key:"reload",value:function(){document.location.reload(!0)}}]),t}(n.Component),re=Object(E.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit}}})(se),ie=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"startPing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";e.interval=setInterval(Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(v.load)(a).pubPanelInCh("ping",{});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,this,[[0,5]])})),t)}}]),e}(),oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={mode:"start",errorMessage:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return"start"===this.state.mode||"loadPanel"===this.state.mode?s.a.createElement(w,{app:this}):"auth"===this.state.mode?s.a.createElement(D,{app:this}):"panel"===this.state.mode?s.a.createElement(ae,{app:this}):"error"===this.state.mode?s.a.createElement(re,{app:this,message:this.state.errorMessage}):void 0}},{key:"loadPanel",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({mode:"loadPanel"}),t=Object(v.load)(),e.next=4,t.subPanelOutCh();case 4:return R.getEngine().connect(),e.next=7,t.pubPanelInCh("firstPing",{});case 7:setTimeout(function(){ie.startPing(),a.setState({mode:"panel"})},3500);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toAuth",value:function(){var e=this;"start"===this.state.mode?setTimeout(function(){e.setState({mode:"auth"})},1500):this.setState({mode:"auth"})}},{key:"setError",value:function(e){var t=this;"start"===this.state.mode?setTimeout(function(){t.setState({mode:"error",errorMessage:e})},1500):this.setState({mode:"error",errorMessage:e})}},{key:"componentDidMount",value:function(){var e=this;this._isMount=!0,"start"===this.state.mode&&Object(l.a)(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(v.create)({hostname:window.location.hostname,port:parseInt(window.location.port),debug:!1}),Object(v.save)(a),a.eventReact().onDisconnect(function(){setTimeout(function(){a.isConnected()||e.setError("The connection to the server is lost.")},5e3)}),a.eventReact().onServerDeauthenticate(function(){e.toAuth()}),t.prev=4,t.next=7,a.connect();case 7:a.isAuthenticated()&&a.getTokenPanelAccess()&&a.getTokenVariable("ZATION-PANEL-USER-NAME")?Object(l.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadPanel();case 2:case"end":return t.stop()}},t,this)}))():e.toAuth(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),t.t0 instanceof f.ConnectionAbortError&&e.setError("Could not connect to the server.");case 13:case"end":return t.stop()}},t,this,[[4,10]])}))()}},{key:"componentWillMount",value:function(){0}},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"setState",value:function(e){this._isMount&&Object(h.a)(Object(m.a)(t.prototype),"setState",this).call(this,e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5449,2,1]]]);
//# sourceMappingURL=main.0c8c8cee.chunk.js.map