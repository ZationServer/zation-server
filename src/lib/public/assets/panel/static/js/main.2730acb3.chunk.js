(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{350:function(e,t,a){},473:function(e,t,a){e.exports=a.p+"static/media/zation-logo.d46e3e57.svg"},475:function(e,t,a){e.exports=a.p+"static/media/zationLogo.fe76f2a9.svg"},499:function(e,t,a){e.exports=a.p+"static/media/user.c50d87dc.svg"},5723:function(e,t,a){e.exports=a(6300)},5729:function(e,t,a){},5730:function(e,t,a){},5731:function(e,t,a){},5799:function(e,t,a){},5826:function(e,t,a){},5871:function(e,t,a){},5872:function(e,t,a){},5875:function(e,t,a){},6020:function(e,t,a){},6021:function(e,t,a){},6293:function(e,t,a){},6294:function(e,t,a){},6295:function(e,t,a){},6296:function(e,t,a){},6297:function(e,t,a){},6299:function(e,t,a){},6300:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),i=a.n(s),o=(a(5728),a(5729),a(5730),a(5731),a(22)),c=a.n(o),l=a(50),u=a(9),p=a(10),m=a(14),h=a(12),d=a(107),g=a(15),v=a(48),f=(a(5799),a(92)),b=a(86),y=a.n(b),k=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App transition-item detail-page darkTheme"},r.a.createElement(y.a,{className:"fullHeight"},r.a.createElement(f.ScaleLoader,{heightUnit:"em",widthUnit:"em",height:7,width:.6,color:"#3099bb"})))}}]),t}(n.Component),E=a(39),w=(a(5826),a(473)),C=a.n(w),D=a(106),O=function(e){document.getElementById(e).classList.remove("shake"),setTimeout(function(){document.getElementById(e).classList.add("shake")},10)},N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e)))._handleKeyPress=function(){var e=Object(l.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,a.login();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!1,error:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.error;return r.a.createElement("div",{className:"App transition-item detail-page darkTheme"},r.a.createElement(y.a,{className:"fullHeight"},r.a.createElement("div",{id:"login-co",className:"loginContainer fadeIn animated"},r.a.createElement("div",{className:"logoContainer"},r.a.createElement("img",{src:C.a,alt:"Zation Logo",width:"110em",height:"110em",className:"logo"}),r.a.createElement("h1",{className:"logoText"},"LOG IN")),r.a.createElement("div",{className:"form"},r.a.createElement("div",{id:"username-co",className:"wrap-input100 validate-input animated "+(a?"wrap-input-error":""),"data-validate":"Enter username"},r.a.createElement("input",{onChange:function(){e.setState({error:!1})},id:"username",onKeyPress:this._handleKeyPress.bind(this),className:"input100",type:"text",name:"username",placeholder:"Username"}),r.a.createElement("span",{className:"focus-input100 focus-input-user"})),r.a.createElement("div",{id:"password-co",className:"wrap-input100 validate-input animated "+(a?"wrap-input-error":""),"data-validate":"Enter password"},r.a.createElement("input",{onChange:function(){e.setState({error:!1})},id:"password",onKeyPress:this._handleKeyPress.bind(this),className:"input100",type:"password",name:"username",placeholder:"Password"}),r.a.createElement("span",{className:"focus-input100 focus-input-lock"}))),r.a.createElement("div",{className:"btnContainer"},r.a.createElement(D.a,{disabled:this.state.loading,variant:"extended","aria-label":"Delete",onClick:this.login.bind(this),className:"btn loginBtn "+t.fab},this.state.loading?r.a.createElement(f.ClipLoader,{color:"white"}):"Login")))))}},{key:"login",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a,n,r=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("username").value,a=document.getElementById("password").value,n=!0,0===t.length&&(n=!1,O("username-co")),0===a.length&&(n=!1,O("password-co")),this.state.error&&(O("username-co"),O("password-co"),n=!1),!n){e.next=11;break}return this.setState({loading:!0}),e.next=10,v.client.request("#panel/auth").data({username:t,password:a}).onSuccessful(function(){document.getElementById("login-co").classList.add("fadeOut"),setTimeout(Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.app.loadPanel();case 2:case"end":return e.stop()}},e,this)})),500)}).onError(function(){r.setState({error:!0}),O("username-co"),O("password-co")}).send();case 10:setTimeout(function(){r.setState({loading:!1})},500);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"componentDidMount",value:function(){this._isMount=!0}},{key:"setState",value:function(e){this._isMount&&Object(d.a)(Object(h.a)(t.prototype),"setState",this).call(this,e)}}]),t}(n.Component),S=Object(E.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit}}})(N),x=a(475),j=a.n(x),I=a(6304),M=(a(5871),a(5872),a(47)),P=a(6306),T=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"getMainPath",value:function(e){return e.substring(0,e.lastIndexOf("/panel")+6)}},{key:"isNotMainPath",value:function(e){var t=e.substring(e.lastIndexOf("/panel")+6);return""!==t&&"/"!==t}}]),e}();T.mainPath="";var L=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar ps--active-y ps"},r.a.createElement("div",{className:"scrollbar-container sidebar-nav ps ps-container ps--active-y"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(P.a,{to:T.mainPath+"/",className:"nav-link","ria-current":"page",exact:!0,activeClassName:"active"},r.a.createElement(M.h,{className:"nav-icon"}),"Overview")),r.a.createElement("li",{className:"nav-title"},"Details"),r.a.createElement("li",{className:"nav-item"},r.a.createElement(P.a,{to:T.mainPath+"/server",className:"nav-link","ria-current":"page",activeClassName:"active"},r.a.createElement(M.f,{className:"nav-icon"}),"Server")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(P.a,{to:T.mainPath+"/clients",className:"nav-link","ria-current":"page",activeClassName:"active"},r.a.createElement(M.j,{className:"nav-icon"}),"Clients")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(P.a,{to:T.mainPath+"/ping",className:"nav-link","ria-current":"page",activeClassName:"active"},r.a.createElement(M.g,{className:"nav-icon"}),"Ping")))),r.a.createElement("button",{className:"sidebar-minimizer mt-auto",onClick:this.miniSidebar.bind(this),type:"button"}))}},{key:"miniSidebar",value:function(){var e=document.getElementsByTagName("body")[0],t=document.getElementsByClassName("sidebar")[0];e.classList.toggle("brand-minimized"),e.classList.toggle("sidebar-minimized"),t.classList.toggle("ps--active-y"),t.classList.toggle("ps")}}]),t}(n.Component),U=a(5874),R=function(){function e(){Object(u.a)(this,e),this.storage={},this.clusterInfoStorage={},this.panelAuthUserMap={},this.defaultUserName="",this.clusterBrokerList=[],this.workerCount=0,this.instanceCount=0,this.emitter=new U,this.setWorkerTimeoutChecker()}return Object(p.a)(e,[{key:"connect",value:function(e){var t=this;e.onPublish("firstPong",function(e){t.firstPong(e[0],e[1])}),e.onPublish("up",function(e){t.update("up",e[0],e[1])}),e.onPublish("up-l",function(e){t.update("up-l",e[0],e[1])})}},{key:"processClusterInfo",value:function(){var e=Date.now(),t=0,a=0,n=0,r=0,s=0,i=0,o=0,c=!1,l=0,u=0,p={},m=!1;for(var h in this.storage)if(this.storage.hasOwnProperty(h)){var d=this.storage[h];for(var g in d.serverStartedTimestamp<e&&(e=d.serverStartedTimestamp),d.cpu&&(t+=d.cpu),d.memory&&(a+=d.memory.totalMemMb,n+=d.memory.usedMemMb),r+=d.brokerCount,d.debug&&(c=!0),d.master&&d.master.stateServerConnected&&(m=!0),d.workers)if(d.workers.hasOwnProperty(g)){var v=d.workers[g];s+=v.clientCount,i+=v.httpRequests,o+=v.wsRequests,l+=v.user.defaultUserGroupCount,u+=v.user.panelUserCount,this._processAuthUserGroup(p,v.user.authUserGroups)}}this.clusterInfoStorage={cpu:t/this.instanceCount,memory:{totalMemMb:a,usedMemMb:n},brokerCount:r,serverStartedTimestamp:e,clientCount:s,httpRequests:i,wsRequests:o,debug:c,stateServerActive:m,user:{panelUserCount:u,defaultUserGroupCount:l,authUserGroups:p}},this.emitter.emit("clusterUpdate")}},{key:"_processAuthUserGroup",value:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e.hasOwnProperty(a)?e[a]+=t[a]:e[a]=t[a])}},{key:"update",value:function(e,t,a){var n=t.instanceId,r=t.workerFullId;if(this._checkWorkerExists(n,r)){var s=this._getIdTarget(n,r);"up"===e?(this._updateSystemInfo(s.instance,s.worker,a.systemInfo),s.worker.clientCount=a.clientCount,s.worker.user=a.user,s.worker.httpRequests=a.httpRequests,s.worker.wsRequests=a.wsRequests,this.emitter.emit("mainUpdate",n,r,s)):"up-l"===e&&(s.instance.brokers=a.brokers,s.instance.master=a.master,this.clusterBrokerList=a.cBrokers,this.emitter.emit("nodeUpdate",n,r,s)),this.refreshWorkerPing(s.worker)}}},{key:"_checkWorkerExists",value:function(e,t){var a=!1;return this.storage.hasOwnProperty(e)&&this.storage[e].workers.hasOwnProperty(t)&&(a=!0),a}},{key:"_getIdTarget",value:function(e,t){return{instance:this.storage[e],worker:this.storage[e].workers[t]}}},{key:"_updatePanelAuthUserMap",value:function(e){if("object"===typeof e)for(var t in e)e.hasOwnProperty(t)&&!this.panelAuthUserMap.hasOwnProperty(t)&&(this.panelAuthUserMap[t]=e[t])}},{key:"_updatePanelDefaultName",value:function(e){this.defaultUserName||(this.defaultUserName=e)}},{key:"firstPong",value:function(e,t){var a=e.instanceId;if(this.storage.hasOwnProperty(a))this._createWorker(this.storage[a],e,t);else{var n={master:{}};n.brokerCount=t.brokerCount,n.hostname=t.hostname,n.port=t.port,n.path=t.path,n.secure=t.secure,n.appName=t.appName,n.debug=t.debug,n.wsEngine=t.wsEngine,n.nodeVersion=t.nodeVersion,n.license=t.license,n.serverStartedTimestamp=t.serverStartedTimestamp,n.zationServerVersion=t.zationServerVersion,n.ip=t.ip,this._updatePanelAuthUserMap(t.panelAuthUserMap),this._updatePanelDefaultName(t.defaultUserName);var r=t.generalSystemInfo;n.cpuModel=r.cpuModel,n.cpuCount=r.cpuCount,n.platform=r.platform,n.oos=r.oos,n.workers={},this.storage[a]=n,this.instanceCount++,this.emitter.emit("newInstance",a),this._createWorker(n,e,t)}0===e.workerId&&(this.clusterBrokerList=t.cBrokers,this.storage[a].brokers=t.brokers,this.storage[a].master=t.master)}},{key:"_updateSystemInfo",value:function(e,t,a){var n=a.instance;e.drive=n.drive,e.memory=n.memory,e.cpu=n.cpu;var r=a.pid;t.cpu=r.cpu,t.memory=r.memory}},{key:"refreshWorkerPing",value:function(e){e.timeout=Date.now()}},{key:"setTaskProcessClusterInfo",value:function(){var e=this;setInterval(function(){e.processClusterInfo()},1e3)}},{key:"_createWorker",value:function(e,t,a){var n=e.workers;if(!n.hasOwnProperty(t.workerFullId)){var r={};r.id=t.workerId,r.workerStartedTimestamp=a.workerStartedTimestamp,r.clientCount=a.clientCount,this._updateSystemInfo(e,r,a.systemInfo),r.user=a.user,r.httpRequests=a.httpRequests,r.wsRequests=a.wsRequests,this.refreshWorkerPing(r),n[t.workerFullId]=r,this.workerCount++,this.emitter.emit("newWorker",t.workerFullId)}}},{key:"setWorkerTimeoutChecker",value:function(){var e=this;setInterval(function(){for(var t in e.storage)if(e.storage.hasOwnProperty(t)){var a=e.storage[t].workers,n=!1;for(var r in a)a.hasOwnProperty(r)&&Date.now()-a[r].timeout>5e3&&(delete a[r],e.workerCount--,n=!0,e.emitter.emit("workerLeft",r));n&&e._checkInstanceIsDown(e.storage[t],t)}},7e3)}},{key:"_checkInstanceIsDown",value:function(e,t){var a=e.workers,n=0;for(var r in a)a.hasOwnProperty(r)&&n++;0===n&&(delete this.storage[t],this.instanceCount--,this.emitter.emit("instanceLeft",t))}}],[{key:"getEngine",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"reset",value:function(){e.instance=new e}}]),e}(),A=a(6305),B=a(504),F=(a(5875),a(350),a(128)),_=a.n(F),V=function(e){var t=document.getElementById(e);t&&(t.classList.remove("pulse"),setTimeout(function(){t.classList.add("pulse")},10))},W=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).btnSwitchId="rt-switchControl-"+t.btnSwitchId,a.btnTimeId="rt-timeControl-"+t.btnTimeId,t.btnTimeId++,t.btnSwitchId++,a.defaultSwitch=a.props.switchDefault,a.state={play:!0,switch:a.defaultSwitch},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:this.props.height?{height:this.props.height}:this.props.minHeight?{minHeight:this.props.minHeight}:{},className:"text-white bg-info card"+(this.props.big?" big-card":"")+(this.props.green?" cardGreen":"")},r.a.createElement("div",{className:"pb-0 card-body"},r.a.createElement("div",{id:"carouselButtons"},r.a.createElement(_.a,{title:this.state.play?"Pause":"Play","aria-label":this.state.play?"Pause":"Play"},r.a.createElement("button",{id:this.btnTimeId,type:"button",className:"btn btn-time-control animated",onClick:this.changeTime.bind(this)},this.state.play?r.a.createElement(M.d,{height:30,width:30,className:"timeIcon"}):r.a.createElement(M.e,{height:20,width:20,className:"timeIcon"}))),this.props.switch?r.a.createElement(_.a,{title:this.props.switchTooltip,"aria-label":this.props.switchTooltip},r.a.createElement("button",{id:this.btnSwitchId,type:"button",className:"btn btn-switch-control animated",onClick:this.btnSwitch.bind(this)},r.a.createElement(M.a,{height:30,width:30,className:"switchIcon"}))):void 0),r.a.createElement("div",{className:"text-value"},this.props.value),r.a.createElement("div",null,this.props.description)),this.props.children)}},{key:"changeTime",value:function(){var e=this;V(this.btnTimeId),this.setState({play:!this.state.play},function(){"function"===typeof e.props.onTimeChange&&e.props.onTimeChange(e.state.play)})}},{key:"btnSwitch",value:function(){var e=this;V(this.btnSwitchId),this.setState({switch:!this.state.switch},function(){"function"===typeof e.props.onSwitchChange&&e.props.onSwitchChange(e.state.switch)})}}]),t}(n.Component);W.btnSwitchId=0,W.btnTimeId=0;var q=W,G=a(70);var z=function(e){var t=this,a="above",n="below",r="chartjs-tooltip",s="no-transform",i="tooltip-body",o="tooltip-body-item",c="tooltip-body-item-color",l="tooltip-body-item-label",u="tooltip-body-item-value",p="tooltip-header",m="tooltip-header-item",h={DIV:"div",SPAN:"span",TOOLTIP:"".concat(this._chart.canvas.id||function(){var e=function(){return(65536*(1+Math.random())|0).toString(16)},a="_canvas-".concat(e()+e());return t._chart.canvas.id=a,a}(),"-tooltip")},d=document.getElementById(h.TOOLTIP);if(d||((d=document.createElement("div")).id=h.TOOLTIP,d.className=r,this._chart.canvas.parentNode.appendChild(d)),0!==e.opacity){if(d.classList.remove(a,n,s),e.yAlign?d.classList.add(e.yAlign):d.classList.add(s),e.body){var g=e.title||[],v=document.createElement(h.DIV);v.className=p,g.forEach(function(e){var t=document.createElement(h.DIV);t.className=m,t.innerHTML=e,v.appendChild(t)});var f=document.createElement(h.DIV);f.className=i,e.body.map(function(e){return e.lines}).forEach(function(t,a){var n=document.createElement(h.DIV);n.className=o;var r=e.labelColors[a],s=document.createElement(h.SPAN);if(s.className=c,s.style.backgroundColor=r.backgroundColor,n.appendChild(s),t[0].split(":").length>1){var i=document.createElement(h.SPAN);i.className=l,i.innerHTML=t[0].split(": ")[0],n.appendChild(i);var p=document.createElement(h.SPAN);p.className=u,p.innerHTML=t[0].split(": ").pop(),n.appendChild(p)}else{var m=document.createElement(h.SPAN);m.className=u,m.innerHTML=t[0],n.appendChild(m)}f.appendChild(n)}),d.innerHTML="",d.appendChild(v),d.appendChild(f)}var b=this._chart.canvas.offsetTop,y=this._chart.canvas.offsetLeft;d.style.opacity=1,d.style.left="".concat(y+e.caretX,"px"),d.style.top="".concat(b+e.caretY,"px")}else d.style.opacity=0},H=function(e,t,a){return e.length>=a?(e.push(t),e.shift(),e):(e.push(t),e)},Z=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).props.getData();a.chartOptions={animation:!1,spanGaps:!0,tooltips:{enabled:!1,custom:z},maintainAspectRatio:!1,legend:{display:!1},layout:{padding:{top:8,right:8,left:8}},scales:{xAxes:[{type:"time",time:{unit:"millisecond"},gridLines:{color:"transparent",zeroLineColor:"transparent"},ticks:{fontSize:2,fontColor:"transparent",beginAtZero:!0}}],yAxes:[{display:!1,ticks:{display:!1}}]},elements:{line:{tension:1e-5,borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}},a.props.postFix&&(a.chartOptions.tooltips.callbacks={label:function(e){return e.yLabel+" "+a.props.postFix}});var r=new Date,s=new Date;s.setMilliseconds(r.getMilliseconds()+(a.props.every/2||1e3));var i={datasets:[{label:a.props.getDataLabel?a.props.getDataLabel(n):a.props.dataLabel?a.props.dataLabel:"",backgroundColor:"rgba(255,255,255,.3)",borderColor:"rgba(255,255,255,.55)",data:[{x:r,y:n},{x:s,y:n}]}]};return a.state={currentData:n,running:!0,chartData:i},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(q,{value:this.getValue.bind(this)(),showTimeControl:!0,description:this.getDescription.bind(this)(),onTimeChange:this.timeChange.bind(this)},r.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"70px"}},r.a.createElement(G.b,{options:this.chartOptions,data:this.state.chartData,height:70})))}},{key:"getDescription",value:function(){return this.props.description?this.props.description:this.props.getDescription?this.props.getDescription(this.state.currentData):""}},{key:"getValue",value:function(){return this.props.getValue?this.props.getValue(this.state.currentData):this.props.postFix?this.state.currentData+" "+this.props.postFix:this.state.currentData}},{key:"timeChange",value:function(e){var t=this;!e&&this.state.running&&this.setState({running:!1},function(){return t.tmpNewData=!1}),e&&!this.state.running&&(this.tmpNewData?this.setState({currentData:this.tmpCurrentData,chartData:this.tmpChartData}):this.process.bind(this)(),this.setState({running:!0}))}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,running:!0})}},{key:"process",value:function(){var e=this.state.chartData.datasets.slice(0),t=e[0].data.slice(0),a=this.props.getData();e[0].data=H(t,{x:new Date,y:a},this.props.maxLength),this.props.getDataLabel&&(e[0].label=this.props.getDataLabel(a));var n=Object.assign({},{datasets:e});this.state.running?this.setState({currentData:a,chartData:n}):(this.tmpCurrentData=a,this.tmpChartData=n,this.tmpNewData=!0)}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),K=a(46),J=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).chartOptions={animation:!1,spanGaps:!0,tooltips:{enabled:!1,custom:z},maintainAspectRatio:!1,legend:{display:void 0===a.props.legend||a.props.legend,labels:{fontColor:"#ffffff"},position:"bottom"},layout:{padding:{top:8,right:8,left:8}},scales:{xAxes:[{type:"time",time:{unit:"millisecond"},gridLines:{color:"transparent",zeroLineColor:"transparent"},ticks:{fontSize:2,fontColor:"transparent",beginAtZero:!0}}],yAxes:[{display:!1,ticks:{display:!1}}]},elements:{line:{borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}},a.props.postFix&&(a.chartOptions.tooltips.callbacks={label:function(e){return e.yLabel+" "+a.props.postFix}});var n=a.props.getData();return a.state={currentData:n,running:!0,chartData:{datasets:[]}},a.fillDataSet.bind(Object(K.a)(a))(),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"fillDataSet",value:function(){var e=this,t=new Date,a=new Date;a.setMilliseconds(t.getMilliseconds()+(this.props.every/2||1e3)),this.state.currentData.forEach(function(n,r){e.state.chartData.datasets.push({label:e.props.label?e.props.label[r]:e.props.getDataLabel(n),backgroundColor:0===r?"rgba(48, 153, 187,.3)":"rgba(43, 225, 98,.3)",borderColor:0===r?"rgba(48, 153, 187,.55)":"rgba(43, 225, 98,.55)",data:[{x:t,y:n},{x:a,y:n}]})})}},{key:"render",value:function(){return r.a.createElement(q,{value:this.getValue.bind(this)(),big:!0,description:this.getDescription.bind(this)(),onTimeChange:this.timeChange.bind(this)},r.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"300px"}},r.a.createElement(G.b,{options:this.chartOptions,data:this.state.chartData,height:70})))}},{key:"getDescription",value:function(){return this.props.description?this.props.description:this.props.getDescription?this.props.getDescription(this.state.currentData):""}},{key:"getValue",value:function(){return this.props.getValue?this.props.getValue(this.state.currentData):this.props.postFix?this.state.currentData+" "+this.props.postFix:this.state.currentData}},{key:"timeChange",value:function(e){var t=this;!e&&this.state.running&&this.setState({running:!1},function(){return t.tmpNewData=!1}),e&&!this.state.running&&(this.tmpNewData?this.setState({currentData:this.tmpCurrentData,chartData:this.tmpChartData}):this.process.bind(this)(),this.setState({running:!0}))}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,running:!0})}},{key:"process",value:function(){var e=this,t=this.state.chartData.datasets.slice(0),a=this.props.getData();a.forEach(function(a,n){var r=t[n].data.slice(0);t[n].data=H(r,{x:new Date,y:a},e.props.maxLength),e.props.getDataLabel&&(t[n].label=e.props.getDataLabel(a))});var n=Object.assign({},{datasets:t});this.state.running?this.setState({currentData:a,chartData:n}):(this.tmpCurrentData=a,this.tmpChartData=n,this.tmpNewData=!0)}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),X=(a(6020),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={value:a.props.getPercent(),isRunning:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(q,{value:this.state.value+" %",showTimeControl:!0,description:this.props.description,onTimeChange:this.timeChange.bind(this)},r.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"70px"}},r.a.createElement("div",{className:"progress mb-3"},r.a.createElement("div",{className:"progress-bar",style:{width:this.state.value+"%"},"aria-valuemin":"0","aria-valuemax":"100"}))))}},{key:"timeChange",value:function(e){!e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e&&!this.state.isRunning&&(this.process.bind(this)(),this.componentDidMount.bind(this)())}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,isRunning:!0})}},{key:"process",value:function(){this.setState({value:this.props.getPercent()})}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component)),Y=(a(6021),a(177)),$=a.n(Y),Q=a(478),ee=a.n(Q),te=a(479);a.n(te)()($.a),$.a.use(ee.a);var ae={name:"euler",animate:"end",randomize:!0,pull:1e-6,theta:.5},ne=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).id=t.id,t.id++,a.currentData=a._processData(),a.state={isRunning:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"process",value:function(){var e=this._datasetIds(this.currentData);this.currentData=this._processData(),this._runBuildCommands(this._buildCommands(e,this.currentData))}},{key:"_buildCommands",value:function(e,t){var a=t.edges.concat(t.nodes),n=[],r=[];return a.forEach(function(t){var a=t.data.id;if(-1!==e.indexOf(a)){var s=e.indexOf(a);e.splice(s,1)}else"nodes"===t.group?n.push(t):r.push(t)}),{removeIds:e,addNodes:n,addEdges:r}}},{key:"_runBuildCommands",value:function(e){var t=this;this.cy.startBatch();var a=!1;e.removeIds.forEach(function(e){t.cy.remove(t.cy.getElementById(e)),a=!0}),e.addNodes.forEach(function(e){t.cy.add(e),a=!0}),e.addEdges.forEach(function(e){t.cy.add(e),a=!0}),a&&this.cy.layout(ae).run(),this.cy.endBatch()}},{key:"_datasetIds",value:function(e){var t=[];return e.edges.concat(e.nodes).forEach(function(e){t.push(e.data.id)}),t}},{key:"_processData",value:function(){var e=R.getEngine().storage,t=[],a=[],n=1,r=R.getEngine().clusterBrokerList,s=!1,i=!1,o=[];for(var c in Array.isArray(r)&&(s=!0,r.forEach(function(e,t){var n="cBroker"+e+t;a.push({data:{id:n,label:"Cluster-Broker "+t},group:"nodes",classes:"11"}),o.push(n)})),R.getEngine().clusterInfoStorage.stateServerActive&&(i=!0,a.push({data:{id:"cState",label:"Cluster-State"},group:"nodes",classes:"11 state"})),e)if(e.hasOwnProperty(c)){var l=e[c],u=l.workers,p=c+"-master",m=l.master.isLeader?"masterLeader":"master";for(var h in a.push({data:{id:p,label:"Master "+n},group:"nodes",classes:"11 "+m}),i&&l.master.stateServerConnected&&t.push({data:{id:p+"cluster-state",source:p,target:"cState"},group:"edges",classes:"lightEdge"}),u)if(u.hasOwnProperty(h)){var d=c+"-worker-"+h;a.push({data:{id:d,label:"Worker "+u[h].id},group:"nodes",classes:"11"}),t.push({data:{id:p+d,source:p,target:d},group:"edges"})}var g=void 0;if(l.brokers)g=l.brokers;else{g={};for(var v=0;v<=l.brokerCount;v++)g[v]=null}for(var f in g)if(g.hasOwnProperty(f)){var b=c+"-broker-"+f;if(a.push({data:{id:b,label:"Broker "+f},group:"nodes",classes:"11"}),t.push({data:{id:p+b,source:p,target:b},group:"edges"}),s)for(var y=0;y<o.length;y++)t.push({data:{id:b+o[y],source:b,target:o[y]},group:"edges"})}n++}return{nodes:a,edges:t}}},{key:"render",value:function(){return r.a.createElement(q,{value:"Network",showTimeControl:!0,onTimeChange:this.timeChange.bind(this),big:!0,height:"35rem"},r.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"15rem"}},r.a.createElement("div",{id:"cy-"+this.id,style:{height:"30.5rem",top:"-14.5rem",position:"relative"}})))}},{key:"timeChange",value:function(e){!e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e&&!this.state.isRunning&&(this.process.bind(this)(),this.setInterval.bind(this)())}},{key:"componentDidMount",value:function(){this.cy=$()({container:document.getElementById("cy-"+this.id),layout:ae,style:[{selector:"node",style:{"background-color":"#3099bb"}},{selector:".master",style:{"background-color":"#2be162"}},{selector:".state",style:{"background-color":"#3c5cda"}},{selector:".masterLeader",style:{"background-color":"#edfd2d"}},{selector:"edge",style:{"line-color":"#26292d",opacity:1}},{selector:".lightEdge",style:{"line-color":"#26292d",opacity:.5}}],elements:this.currentData}),this.cy.nodeHtmlLabel([{query:".11",valign:"top",halign:"center",valignBox:"top",halignBox:"center",tpl:function(e){return'<p class="cy-title__p1">'+e.label+"</p>"}}]),this.setInterval()}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||5e3);this.setState({interval:t,isRunning:!0})})},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component);ne.id=0;var re=ne,se=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(Z,{getDataLabel:t.getClientsConnectedDesc,getDescription:t.getClientsConnectedDesc,maxLength:10,getData:t.getClientsConnected,every:1e3})),r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(Z,{dataLabel:"Worker",getDescription:t.getWorkerDesc,getData:t.getWorkerOnline,maxLength:10,every:4e3})),r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(X,{description:"Cpu usage",getPercent:t.getCpuUsage,every:1e3})),r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(Z,{dataLabel:"Memory usage",description:"Memory usage",getData:t.getMemoryUsage,every:2e3,maxLength:10,postFix:"mb",getValue:t.getMemoryUsagePercent}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-12"},r.a.createElement(J,{description:"Requests in total",label:["WebSocket Requests","HTTP Requests"],getValue:function(e){return e.reduce(function(e,t){return e+t},0)},getData:t.getRequestData,maxLength:40,every:1e3}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-12"},r.a.createElement(re,{every:5e3})))))}}],[{key:"getRequestData",value:function(){return[R.getEngine().clusterInfoStorage.wsRequests,R.getEngine().clusterInfoStorage.httpRequests]}},{key:"getWorkerDesc",value:function(e){return"Worker".concat(e>1||0===e?"s":""," online (")+R.getEngine().instanceCount+" Server)"}},{key:"getClientsConnectedDesc",value:function(e){return e>1||0===e?"Clients connected":"Client connected"}},{key:"getClientsConnected",value:function(){return R.getEngine().clusterInfoStorage.clientCount}},{key:"getCpuUsage",value:function(){return Number(R.getEngine().clusterInfoStorage.cpu).toFixed(1)}},{key:"getMemoryUsage",value:function(){return Number(R.getEngine().clusterInfoStorage.memory.usedMemMb).toFixed(0)}},{key:"getMemoryUsagePercent",value:function(e){return Number(e/R.getEngine().clusterInfoStorage.memory.totalMemMb*100).toFixed(1)+" %"}},{key:"getWorkerOnline",value:function(){return R.getEngine().workerCount}}]),t}(n.Component),ie=a(480),oe=a.n(ie),ce=(a(6293),Object(E.createMuiTheme)({typography:{useNextVariants:!0},overrides:{MuiPaper:{root:{top:"-1rem !important",boxShadow:"none !important",backgroundColor:"transparent !important"}},MuiTableCell:{root:{color:"white !important",fontFamily:"NexaBold",padding:"4px 16px 4px 24px"}},MuiTableSortLabel:{root:{"&:hover":{color:"rgba(43, 225, 98,1.0) !important"},"&:focus":{color:"rgba(43, 225, 98,1.0) !important"}},active:{color:"rgba(43, 225, 98,1.0) !important"}},MuiIconButton:{label:{"&:focus":{outline:"none"}}}}})),le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isRunning:!0,data:a.props.getData()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"tableCard"},r.a.createElement(q,{value:this.props.value,big:!0,minHeight:"29rem",green:!0,onTimeChange:this.timeChange.bind(this)},r.a.createElement("div",{className:"chart-wrapper mx-3 table-con"},r.a.createElement(E.MuiThemeProvider,{theme:ce},r.a.createElement(oe.a,{actions:this.props.actions,columns:this.props.columns,data:this.state.data,title:"",options:{paging:!1,toolbar:!1},headerStyle:{backgroundColor:"black"}})))))}},{key:"timeChange",value:function(e){!e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e&&!this.state.isRunning&&(this.process.bind(this)(),this.componentDidMount.bind(this)())}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,isRunning:!0})}},{key:"process",value:function(){this.setState({data:this.props.getData()})}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),ue=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"processDate",value:function(e){return new Date(e).toLocaleString("en-GB",{dateStyle:"full",timeStyle:"long"})}},{key:"processTimeSpan",value:function(e){return Date.now()-e}},{key:"processAge",value:function(e){if(e<1e3)return"1 sec";if(e<6e4)return parseInt(e/1e3)+" sec";if(e<36e5)return parseInt(e/6e4)+" min";if(e<864e5){var t=parseInt(e/36e5);return t+(1===t?" hour":" hours")}if(e<6048e5){var a=parseInt(e/864e5);return a+(1===a?" day":" days")}if(e<2628e6){var n=parseInt(e/6048e5);return n+(1===n?" week":" weeks")}if(e<3154e7){var r=parseInt(e/2628e6);return r+(1===r?" month":" months")}var s=parseInt(e/3154e7);return s+(1===s?" year":" years")}}]),e}(),pe=(a(6294),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=parseInt(this.props.progress)<=100?this.props.progress:100;return r.a.createElement("div",{className:"progressCardTooltip",style:{maxWidth:"100px",width:"8rem",backgroundColor:"#999999",height:20}},r.a.createElement("div",{style:{textAlign:"left",padding:1,color:"white",width:e,backgroundColor:"rgba(43, 225, 98,1.0)",height:20}}),r.a.createElement("span",{className:"tooltipText"},e))}}]),t}(n.Component)),me=(a(6295),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ageCardTooltip"},r.a.createElement("span",null,ue.processAge(this.props.rowData.age)),r.a.createElement("span",{className:"tooltipText"},ue.processDate(this.props.rowData.started)))}}]),t}(n.Component)),he=[{title:"Leader",field:"leader",filtering:!1,render:function(e){return e.leader?r.a.createElement(M.b,{height:20}):r.a.createElement(M.i,{height:20})}},{title:"Id",field:"id"},{title:"Age",field:"age",filtering:!1,render:function(e){return r.a.createElement(me,{rowData:e})}},{title:"Client/s",field:"clientCount"},{title:"Cpu Usage",field:"cpu",render:function(e){return r.a.createElement(pe,{progress:e.cpu+"%"})}},{title:"Memory Usage",field:"memory",render:function(e){return r.a.createElement(pe,{progress:e.memory+"%"})}},{title:"Worker",field:"workerCount",type:"numeric"},{title:"Broker",field:"brokerCount",type:"numeric"},{title:"Request/s",field:"requestCount",type:"numeric"}],de=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-6"},r.a.createElement(J,{legend:!1,description:"Cpu usage",getData:t.getCpuUsage,maxLength:20,every:1e3,postFix:"%",label:["Cpu usage"]})),r.a.createElement("div",{className:"col-sm-6 col-lg-6"},r.a.createElement(J,{legend:!1,label:"Memory usage",description:"Memory usage",getData:t.getMemoryUsage,every:2e3,maxLength:10,postFix:"mb",getValue:t.getMemoryUsagePercent}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-12"},r.a.createElement(le,{actions:[{icon:M.c,tooltip:"Show more information",onClick:function(t,a){e.props.history.push("server/"+a.id)},iconProps:{style:{fontSize:30}}}],columns:he,getData:t.getServerTableData,value:"Server"})))))}}],[{key:"getServerTableData",value:function(){var e=[],t=R.getEngine().storage;for(var a in t)if(t.hasOwnProperty(a)){var n=t[a],r=n.workers,s=0,i=0,o=0;for(var c in r)if(r.hasOwnProperty(c)){s++;var l=r[c];i+=l.clientCount,o+=l.httpRequests,o+=l.wsRequests}var u={id:a,leader:n.master.isLeader,age:ue.processTimeSpan(n.serverStartedTimestamp),started:n.serverStartedTimestamp,workerCount:s,brokerCount:n.brokerCount,requestCount:o,cpu:Number(n.cpu).toFixed(1),clientCount:i,memory:"?"};n.memory&&(u.memory=Number(100*n.memory.usedMemMb/n.memory.totalMemMb).toFixed(1)),e.push(u)}return e}},{key:"getCpuUsage",value:function(){return[Number(R.getEngine().clusterInfoStorage.cpu).toFixed(1)]}},{key:"getMemoryUsage",value:function(){return[Number(R.getEngine().clusterInfoStorage.memory.usedMemMb).toFixed(0)]}},{key:"getMemoryUsagePercent",value:function(e){return Number(e/R.getEngine().clusterInfoStorage.memory.totalMemMb*100).toFixed(1)+" %"}}]),t}(n.Component),ge=a(503),ve=a(499),fe=a.n(ve),be=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={play:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"text-white bg-info card"+(this.props.big?" big-card":"")+(this.props.extraBig?" extra-big-card":"")},r.a.createElement("div",{className:"pb-0 card-body"},r.a.createElement("div",{className:"text-value"},this.props.value),r.a.createElement("div",null,this.props.description)),this.props.children)}}]),t}(n.Component),ye={renderZeroCompensation:function(e,t){var a=t._view,n=e.chart.ctx,r=a.x-a.width/2;n.beginPath(),n.strokeStyle="#aaaaaa",n.moveTo(r,a.y),n.lineTo(r+a.width,a.y),n.stroke()},afterDatasetsDraw:function(e,t){var a=this,n=e.getDatasetMeta(0),r=e.config.data.datasets[0].data;n.data.forEach(function(t,n){0===r[n]&&a.renderZeroCompensation(e,t)})}},ke=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).chartOptions={scaleBeginAtZero:!0,barBeginAtOrigin:!0,tooltips:{enabled:!1,custom:z},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1,barPercentage:.8}],yAxes:[{ticks:{beginAtZero:!0,suggestedMin:0,min:0},display:!0}]}},a.props.postFix&&(a.chartOptions.tooltips.callbacks={label:function(e){return e.yLabel+" "+a.props.postFix}}),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"buildDataSet",value:function(){return{labels:this.props.label,datasets:[{backgroundColor:"rgba(48, 153, 187,1)",borderColor:"rgba(48, 153, 187,1)",data:this.props.data}]}}},{key:"render",value:function(){return r.a.createElement(be,{value:this.props.value,extraBig:!0,big:!0,description:this.props.description},r.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"300px"}},r.a.createElement(G.a,{options:this.chartOptions,data:this.buildDataSet.bind(this)(),height:800,plugins:[ye],redraw:this.props.redraw})))}}]),t}(n.Component),Ee=(a(6296),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={mode:"load",btnLoad:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.mode;return"load"===t?r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement(y.a,{className:"fullHeight loaderDown"},r.a.createElement(f.ScaleLoader,{heightUnit:"em",widthUnit:"em",height:7,width:.6,color:"#3099bb"})))):"result"===t?r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement(ke,{postFix:"ms",label:this.state.label,description:"Average ping time",data:this.state.data,value:this.state.avg+" ms",redraw:!0})),r.a.createElement("div",{className:"btnContainer pingBtn-co"},r.a.createElement(D.a,{variant:"extended","aria-label":"Delete",onClick:this.refresh.bind(this),className:"btn loginBtn "+e.fab},this.state.btnLoad?r.a.createElement(f.ClipLoader,{color:"white"}):"Refresh"))):void 0}},{key:"refresh",value:function(){this.setState({btnLoad:!0}),this.process.bind(this)()}},{key:"componentDidMount",value:function(){this._isMount=!0,"load"===this.state.mode&&this.process.bind(this)()}},{key:"process",value:function(){var e=this;Object(l.a)(c.a.mark(function t(){var a,n,r,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],n=[],r=1;case 3:if(!(r<21)){t.next=13;break}return a.push("Ping "+r),t.t0=n,t.next=8,v.client.ping();case 8:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 10:r++,t.next=3;break;case 13:s=n.reduce(function(e,t){return e+t}),e.setState({label:a,avg:Number(s/n.length).toFixed(2),mode:"result",data:n.map(function(e){return e.toFixed(3)}),btnLoad:!1});case 15:case"end":return t.stop()}},t,this)}))()}},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"setState",value:function(e){this._isMount&&Object(d.a)(Object(h.a)(t.prototype),"setState",this).call(this,e)}}]),t}(n.Component)),we=Object(E.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit}}})(Ee),Ce={maintainAspectRatio:!1,legend:{display:!0,labels:{fontColor:"#ffffff"},position:"bottom",borderColor:"#343a40"},layout:{padding:{top:8,right:8,left:8,bottom:15}}},De=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isRunning:!0,data:a.props.getData()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(q,{value:this.getValue.bind(this)(),big:!0,height:"29rem",description:this.getDescription.bind(this)(),onTimeChange:this.timeChange.bind(this)},r.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"400px"}},r.a.createElement(G.c,{options:Ce,data:this.state.data,height:195})))}},{key:"getDescription",value:function(){return this.props.description?this.props.description:this.props.getDescription?this.props.getDescription(this.state.value):""}},{key:"getValue",value:function(){return this.props.getValue?this.props.getValue(this.state.value):this.props.postFix?this.state.value+" "+this.props.postFix:this.state.value}},{key:"timeChange",value:function(e){!e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e&&!this.state.isRunning&&(this.process.bind(this)(),this.componentDidMount.bind(this)())}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,isRunning:!0})}},{key:"process",value:function(){this.setState({data:this.props.getData()})}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),Oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).chartOptions={scaleBeginAtZero:!0,barBeginAtOrigin:!0,tooltips:{enabled:!1,custom:z},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1,barPercentage:.8}],yAxes:[{ticks:{beginAtZero:!0,suggestedMin:0,min:0,callback:function(e){if(Number.isInteger(e))return e},stepSize:1},display:!0}]}},a.props.postFix&&(a.chartOptions.tooltips.callbacks={label:function(e){return e.yLabel+" "+a.props.postFix}}),a.switchDefault=a.props.getSwitchDefault(),a.state={isRunning:!0,data:a.props.getData(a.switchDefault),switch:a.switchDefault,switchTooltip:a.getSwitchTooltip(a.switchDefault)},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.switchTooltip,a=e.data;return r.a.createElement(q,{value:this.getValue.bind(this)(),big:!0,switch:!0,switchDefault:this.switchDefault,onSwitchChange:this.switchChange.bind(this),switchTooltip:t,height:"29rem",description:this.getDescription.bind(this)(),onTimeChange:this.timeChange.bind(this)},r.a.createElement("div",{className:"chart-wrapper mx-3",style:{height:"320px"}},r.a.createElement(G.a,{options:this.chartOptions,data:a,height:500,plugins:[ye],redraw:this.props.redraw})))}},{key:"getDescription",value:function(){return this.props.description?this.props.description:this.props.getDescription?this.props.getDescription(this.state.switch):""}},{key:"getValue",value:function(){return this.props.value?this.props.value:this.props.getValue?this.props.getValue(this.state.value):this.props.postFix?this.state.value+" "+this.props.postFix:this.state.value}},{key:"timeChange",value:function(e){!e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e&&!this.state.isRunning&&(this.process.bind(this)(),this.componentDidMount.bind(this)())}},{key:"switchChange",value:function(e){this.setState({switch:e,switchTooltip:this.getSwitchTooltip(e)}),this.process()}},{key:"getSwitchTooltip",value:function(e){return e?"On worker":"On server"}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.process.bind(e)()},this.props.every||1e3);this.setState({interval:t,isRunning:!0})}},{key:"process",value:function(){this.setState({data:this.props.getData(this.state.switch)})}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),Ne=["#F47B00","#2BE162","#FF4D31","#2EAFD3","#A5F62F"],Se=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-12"},r.a.createElement(J,{redraw:!0,getValue:function(e){return e[0]},getData:t.getClientCount,maxLength:40,every:1e3,getDataLabel:t.getClientsConnectedDesc,getDescription:t.getClientsConnectedDesc}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-6"},r.a.createElement(De,{getData:t.getPieUserGroupsData,every:1e3,getValue:t.getPieUserGroupsValue,description:"User groups"})),r.a.createElement("div",{className:"col-sm-12 col-lg-6"},r.a.createElement(Oe,{getData:t.getClientDistributionData,every:1e3,postFix:"Client/s",value:"Client distribution",getSwitchDefault:t.getClientDistributionSwitchDefault,getDescription:t.getClientDistributionDesc})))))}}],[{key:"getClientDistributionDesc",value:function(e){return e?"On server":"On worker"}},{key:"getClientDistributionData",value:function(e){var t=[],a=[],n=R.getEngine().storage;if(e){var r=1;for(var s in n)if(n.hasOwnProperty(s)){t.push("Server "+r);var i=n[s].workers,o=0;for(var c in i)i.hasOwnProperty(c)&&(o+=i[c].clientCount);a.push(o),r++}}else{var l=1;for(var u in n)if(n.hasOwnProperty(u)){var p=n[u].workers;for(var m in p)p.hasOwnProperty(m)&&(t.push("Server "+l+" - Worker "+p[m].id),a.push(p[m].clientCount));l++}}return{labels:t,datasets:[{backgroundColor:"rgba(48, 153, 187,1)",borderColor:"rgba(48, 153, 187,1)",data:a}]}}},{key:"getClientDistributionSwitchDefault",value:function(){return R.getEngine().instanceCount>1}},{key:"getPieUserGroupsData",value:function(){var e={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[],borderColor:"#343a40"}]},a=R.getEngine(),n=a.clusterInfoStorage.user;t._addGroup(e,n.defaultUserGroupCount,a.defaultUserName,"#F4AB00"),t._addGroup(e,n.panelUserCount,"Panel User","#3099bb");var r=n.authUserGroups,s=0;for(var i in r){if(r.hasOwnProperty(i)){var o=i;a.panelAuthUserMap.hasOwnProperty(i)&&(o=a.panelAuthUserMap[i]),t._addGroup(e,r[i],o,Ne[s])}++s===Ne.length&&(s=0)}return e}},{key:"_addGroup",value:function(e,a,n,r){e.labels.push(t.formatUserGroupName(n));var s=e.datasets[0];s.data.push(a),s.backgroundColor.push(r),s.hoverBackgroundColor.push(r)}},{key:"formatUserGroupName",value:function(e){return"string"!==typeof e?"Unknown":e.replace(/(?:^|\s|["'([{])+\S/g,function(e){return e.toUpperCase()})}},{key:"getPieUserGroupsValue",value:function(){return Object.keys(R.getEngine().clusterInfoStorage.user.authUserGroups).length+2}},{key:"getClientsConnectedDesc",value:function(e){return e>1||0===e?"Clients connected":"Client connected"}},{key:"getClientCount",value:function(){return[R.getEngine().clusterInfoStorage.clientCount]}}]),t}(n.Component),xe=a(87),je=a.n(xe),Ie=(a(6297),function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"countKeys",value:function(e){var t=0;for(var a in e)e.hasOwnProperty(a)&&t++;return t}}]),e}()),Me=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).id=e.id,a.dataEngine=R.getEngine(),a.state={isRunning:!0,data:a.process()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"tableCard main-font"},r.a.createElement(q,{value:"Server Details",big:!0,height:"29rem",onTimeChange:this.timeChange.bind(this)},r.a.createElement("div",{className:"chart-wrapper mx-3 table-con"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-6 font1"},r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Instance id    :")," ",e.id),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Zation Server Version :")," ",e.zationServerVersion),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Node Version   :")," ",e.nodeVersion),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Platform       :")," ",e.platform),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"OS             :")," ",e.oos),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"CPU            :")," ",e.cpu),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Leader         :")," ",e.leader),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Worker         :")," ",e.worker),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Broker         :")," ",e.broker),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Started        :")," ",e.startedTime)),r.a.createElement("div",{className:"col-sm-6 col-lg-6 font1"},r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"IP Address     :")," ",e.ip),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Hostname       :")," ",e.hostname),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Port           :")," ",e.port),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Path           :")," ",e.path),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"App Name       :")," ",e.appName),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"License        :")," ",e.license),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"License Type   :")," ",e.licenseType),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Secure         :")," ",e.secure),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Debug          :")," ",e.debug),r.a.createElement("p",null,r.a.createElement("span",{id:"blue-f"},"Drive Usage    :")," ",e.driveUsage)))))))}},{key:"process",value:function(){var e={},t=this.dataEngine.storage[this.id];if(t){e.id=this.id,e.ip=t.ip,e.hostname=t.hostname,e.port=t.port,e.path=t.path,e.secure=t.secure?"yes":"no",e.leader=t.master.isLeader?"yes":"no",e.startedTime=ue.processDate(t.serverStartedTimestamp),e.worker=Ie.countKeys(t.workers),e.broker=Ie.countKeys(t.brokers),e.oos=t.oos,e.cpu=t.cpuModel,e.appName=t.appName,e.platform=t.platform,e.debug=t.debug?"yes":"no",e.nodeVersion=t.nodeVersion,e.zationServerVersion=t.zationServerVersion,t.drive?e.driveUsage=t.drive.usedPercentage+" %":e.driveUsage="Unknown";var a=t.license;a?(e.license="Licensed to ".concat(a.h," (").concat(a.l,") (Id: ").concat(a.i,")"),e.licenseType="".concat(a.t," License (").concat(-1===a.mi?"Unlimited instances":"Max ".concat(a.mi," instance").concat(a.mi>1?"s":""),")")):(e.license="No license (only for testing)",e.licenseType="/")}return e}},{key:"timeChange",value:function(e){!e&&this.state.isRunning&&(clearInterval(this.state.interval),this.setState({isRunning:!1})),e&&!this.state.isRunning&&(this.process.bind(this)(),this.componentDidMount.bind(this)())}},{key:"componentDidMount",value:function(){var e=this,t=setInterval(function(){e.setState({data:e.process()})},this.props.every||1e3);this.setState({interval:t,isRunning:!0})}},{key:"componentWillUnmount",value:function(){this.state.interval&&clearInterval(this.state.interval)}}]),t}(n.Component),Pe=[{title:"Leader",field:"leader",filtering:!1,render:function(e){return e.leader?r.a.createElement(M.b,{height:20}):r.a.createElement(M.i,{height:20})}},{title:"Id",field:"id"},{title:"Age",field:"age",filtering:!1,render:function(e){return r.a.createElement(me,{rowData:e})}},{title:"Client/s",field:"clientCount"},{title:"Cpu Usage",field:"cpu",render:function(e){return r.a.createElement(pe,{progress:e.cpu+"%"})}},{title:"Memory Usage",field:"memory",render:function(e){return r.a.createElement(pe,{progress:e.memory+"%"})}},{title:"Request/s",field:"requestCount",type:"numeric"}],Te=[{title:"Id",field:"id"},{title:"Age",field:"age",filtering:!1,render:function(e){return r.a.createElement(me,{rowData:e})}},{title:"Cpu Usage",field:"cpu",render:function(e){return r.a.createElement(pe,{progress:e.cpu+"%"})}},{title:"Memory Usage",field:"memory",render:function(e){return r.a.createElement(pe,{progress:e.memory+"%"})}}],Le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).id=e.match.params.id,a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-12"},r.a.createElement(Me,{id:this.id}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(Z,{getDataLabel:t.getClientsConnectedDesc,getDescription:t.getClientsConnectedDesc,maxLength:20,getData:this.getClientsConnected.bind(this),every:2e3})),r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(Z,{getDataLabel:t.getRequestsDesc,getDescription:t.getRequestsDesc,getData:this.getRequest.bind(this),maxLength:20,every:4e3})),r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(Z,{dataLabel:"Cpu usage",description:"Cpu usage",getData:this.getCpuUsage.bind(this),every:2e3,maxLength:20,postFix:"%"})),r.a.createElement("div",{className:"col-sm-6 col-lg-3"},r.a.createElement(Z,{dataLabel:"Memory usage",description:"Memory usage",getData:this.getMemoryUsage.bind(this),every:2e3,maxLength:20,postFix:"mb",getValue:this.getMemoryUsageValue.bind(this)}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-12"},r.a.createElement(le,{columns:Pe,getData:this.getWorkerTableData.bind(this),value:"Worker"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-lg-12"},r.a.createElement(le,{columns:Te,getData:this.getBrokerTableData.bind(this),value:"Broker"})))))}},{key:"getBrokerTableData",value:function(){var e=[],t=R.getEngine().storage[this.id];if(t){var a=t.brokers;for(var n in a)if(a.hasOwnProperty(n)){var r=a[n];e.push({id:n,age:ue.processTimeSpan(r.brokerStartedTimestamp),started:r.brokerStartedTimestamp,cpu:Number(r.system.cpu).toFixed(1),memory:Number(100*r.system.memory/t.memory.totalMemMb).toFixed(1)})}}return e}},{key:"getWorkerTableData",value:function(){var e=[],t=R.getEngine().storage[this.id];if(t){var a=t.workers;for(var n in a)if(a.hasOwnProperty(n)){var r=a[n];e.push({id:r.id,leader:0===r.id,age:ue.processTimeSpan(r.workerStartedTimestamp),started:r.workerStartedTimestamp,clientCount:r.clientCount,cpu:Number(r.cpu).toFixed(1),memory:Number(100*r.memory/t.memory.totalMemMb).toFixed(1),requestCount:r.httpRequests+r.wsRequests})}}return e}},{key:"getMemoryUsageValue",value:function(e){return Number(e/R.getEngine().storage[this.id].memory.totalMemMb*100).toFixed(1)+" %"}},{key:"getMemoryUsage",value:function(){return Number(R.getEngine().storage[this.id].memory.usedMemMb).toFixed(0)}},{key:"getCpuUsage",value:function(){return Number(R.getEngine().storage[this.id].cpu).toFixed(1)}},{key:"getRequest",value:function(){var e=R.getEngine().storage[this.id],t=0;if(e){var a=e.workers;for(var n in a)a.hasOwnProperty(n)&&(t+=a[n].httpRequests,t+=a[n].wsRequests)}return t}},{key:"getClientsConnected",value:function(){var e=R.getEngine().storage[this.id],t=0;if(e){var a=e.workers;for(var n in a)a.hasOwnProperty(n)&&(t+=a[n].clientCount)}return t}}],[{key:"getClientsConnectedDesc",value:function(e){return e>1||0===e?"Clients connected":"Client connected"}},{key:"getRequestsDesc",value:function(e){return e>1||0===e?"Requests":"Request"}}]),t}(n.Component);je.a.defaults.global.animation.duration=1e3;var Ue=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(m.a)(this,Object(h.a)(t).call(this,e));try{var n=v.client.tokenPayload;a.state={name:null!=n?n["ZATION-PANEL-USER-NAME"]:"Unknown"},R.getEngine().setTaskProcessClusterInfo(),R.getEngine().processClusterInfo()}catch(r){a.state={name:"Unknown name"}}return a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement("div",{className:"App transition-item detail-page sidebar-lg-show sidebar-fixed"},r.a.createElement("header",{className:"app-header"},r.a.createElement(I.a,{className:"navbar",bg:"dark",variant:"dark"},r.a.createElement(ge.a,{className:"navbar-toggler sidebar-toggler d-lg-none mr-auto",onClick:this.switchSidebar.bind(this)},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement(I.a.Brand,{href:"#home",className:"sm-auto logoCo"},r.a.createElement("img",{alt:"",src:j.a,width:"30",height:"30",className:"d-inline-block align-top"})," Zation"),r.a.createElement("div",{className:"profile"},r.a.createElement("span",{className:"name"},this.state.name),r.a.createElement("li",{className:"nav-item dropdown account-switch"},r.a.createElement("a",{className:"nav-link nav-link",href:"/",onClick:this.switchAccountDropDown.bind(this)},r.a.createElement("img",{src:fe.a,alt:"user",width:"30",height:"30",className:"account-switch"})),r.a.createElement("div",{id:"account-dropdown-menu",className:"dropdown-menu dropdown-menu-right animated fadeIn account-switch"},r.a.createElement("div",{className:"dropdown-header text-center account-switch"},r.a.createElement("strong",{className:"account-switch"},"Account")),r.a.createElement("div",{className:"dropdown-item account-switch",onClick:this.logout.bind(this)},r.a.createElement("i",{className:"fa fa-lock"}),"Logout")))))),r.a.createElement(L,null),r.a.createElement("main",{className:"main"},r.a.createElement(B.a,{exact:!0,path:T.mainPath+"/",component:se}),r.a.createElement(B.a,{exact:!0,path:T.mainPath+"/ping",component:we}),r.a.createElement(B.a,{exact:!0,path:T.mainPath+"/clients",component:Se}),r.a.createElement(B.a,{exact:!0,path:T.mainPath+"/server",component:de}),r.a.createElement(B.a,{exact:!0,path:T.mainPath+"/server/:id",component:Le}))))}},{key:"componentDidMount",value:function(){var e=this;document.getElementsByTagName("body")[0].addEventListener("click",function(t){e.offAccountDropDown(t)})}},{key:"switchSidebar",value:function(){document.getElementsByTagName("body")[0].classList.toggle("sidebar-show")}},{key:"switchAccountDropDown",value:function(e){e.preventDefault(),document.getElementById("account-dropdown-menu").classList.toggle("show")}},{key:"offAccountDropDown",value:function(e){if(!e.target.classList.contains("account-switch")){var t=document.getElementById("account-dropdown-menu");t&&t.classList.contains("show")&&t.classList.remove("show")}}},{key:"logout",value:function(){var e=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.client.deauthenticate();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:window.location.pathname=T.getMainPath(window.location.pathname);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),Re=(a(6299),a(279)),Ae=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:"App transition-item detail-page darkTheme"},r.a.createElement(y.a,{className:"fullHeight"},r.a.createElement("div",{className:"ErrorContainer"},r.a.createElement(Re.b,{className:"warningIcon bounceInDown animated"}),r.a.createElement("h1",null,this.props.message),r.a.createElement(D.a,{variant:"extended","aria-label":"Delete",onClick:this.reload,className:"btn "+e.fab},r.a.createElement(Re.a,{className:e.extendedIcon}),"Try again"))))}},{key:"reload",value:function(){window.location.pathname=T.mainPath}}]),t}(n.Component),Be=Object(E.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit}}})(Ae),Fe=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"startPing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3;arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.interval=setInterval(Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!v.client.hasPanelAccess()){e.next=4;break}return e.next=4,v.client.transmit("#panel").send();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}},e,this,[[0,6]])})),t)}}]),e}(),_e=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={mode:"start",errorMessage:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return"start"===this.state.mode||"loadPanel"===this.state.mode?r.a.createElement(k,{app:this}):"auth"===this.state.mode?r.a.createElement(S,{app:this}):"panel"===this.state.mode?r.a.createElement(Ue,{app:this}):"error"===this.state.mode?r.a.createElement(Be,{app:this,message:this.state.errorMessage}):void 0}},{key:"loadPanel",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({mode:"loadPanel"}),t=v.client.channel("#panel"),e.next=4,t.subscribe();case 4:return R.getEngine().connect(t),e.next=7,v.client.transmit("#panel",!0).send();case 7:setTimeout(function(){Fe.startPing(),a.setState({mode:"panel"})},3e3);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toAuth",value:function(){var e=this;"start"===this.state.mode?setTimeout(function(){e.setState({mode:"auth"})},1500):this.setState({mode:"auth"})}},{key:"setError",value:function(e){var t=this;"start"===this.state.mode?setTimeout(function(){t.setState({mode:"error",errorMessage:e})},1500):this.setState({mode:"error",errorMessage:e})}},{key:"componentDidMount",value:function(){var e=this;this._isMount=!0,"start"===this.state.mode&&Object(l.a)(c.a.mark(function t(){var a,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(v.create)({hostname:window.location.hostname,port:parseInt(window.location.port),secure:"https:"===window.location.protocol,rejectUnauthorized:!1,debug:!1},!0)).eventReact().onDisconnect(function(){setTimeout(function(){a.isConnected()||e.setError("The connection to the server is lost.")},5e3)}),a.eventReact().onServerDeauthenticate(function(){e.toAuth()}),t.prev=3,t.next=6,a.connect();case 6:n=a.tokenPayload,a.hasPanelAccess()&&null!=n&&null!=n["ZATION-PANEL-USER-NAME"]?Object(l.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadPanel();case 2:case"end":return t.stop()}},t,this)}))():e.toAuth(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),t.t0 instanceof v.ConnectionAbortError?e.setError("Could not connect to the server."):e.setError("Unknown error occurred");case 13:case"end":return t.stop()}},t,this,[[3,10]])}))()}},{key:"componentWillMount",value:function(){T.isNotMainPath(window.location.pathname)&&(window.location.pathname=T.getMainPath(window.location.pathname)),T.mainPath=T.getMainPath(window.location.pathname)}},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"setState",value:function(e){this._isMount&&Object(d.a)(Object(h.a)(t.prototype),"setState",this).call(this,e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5723,1,2]]]);
//# sourceMappingURL=main.2730acb3.chunk.js.map